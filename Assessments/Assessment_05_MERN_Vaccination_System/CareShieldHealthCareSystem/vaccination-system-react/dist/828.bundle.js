"use strict";(self.webpackChunkvaccination_system_react=self.webpackChunkvaccination_system_react||[]).push([[828],{828:(n,e,t)=>{t.r(e),t.d(e,{default:()=>_});var r=t(6540),a=t(1468),o=t(1799),c=t(5508),i=function(n){return n.vaccineStock},l=(0,c.Mz)(i,function(n){return n.currentStock}),s=(0,c.Mz)(i,function(n){return n.loadingStock}),A=(0,c.Mz)(i,function(n){return n.errorStock}),u=(0,c.Mz)(i,function(n){return n.updateStatus}),d=(0,c.Mz)(i,function(n){return n.updateError}),p=(0,c.Mz)(i,function(n){return n.createStatus}),C=(0,c.Mz)(i,function(n){return n.createError}),m=t(5905),g=t(2865),f=t(6784),v=t(8512),b=t(8721),h=t(9694),B=t(5072),I=t.n(B),y=t(7825),x=t.n(y),k=t(7659),E=t.n(k),w=t(5056),S=t.n(w),z=t(540),F=t.n(z),N=t(1113),M=t.n(N),D=t(9347),q={};function P(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,a,o,c,i=[],l=!0,s=!1;try{if(o=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=o.call(t)).done)&&(i.push(r.value),i.length!==e);l=!0);}catch(n){s=!0,a=n}finally{try{if(!l&&null!=t.return&&(c=t.return(),Object(c)!==c))return}finally{if(s)throw a}}return i}}(n,e)||function(n,e){if(n){if("string"==typeof n)return Q(n,e);var t={}.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Q(n,e):void 0}}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}q.styleTagTransform=M(),q.setAttributes=S(),q.insert=E().bind(null,"head"),q.domAPI=x(),q.insertStyleElement=F(),I()(D.A,q),D.A&&D.A.locals&&D.A.locals;const _=function(){var n,e,t=(0,a.wA)(),c=(0,a.d4)(m.xu),i=(0,a.d4)(v.Ub),B=(0,a.d4)(l),I=(0,a.d4)(s),y=(0,a.d4)(A),x=(0,a.d4)(u),k=(0,a.d4)(d),E=(0,a.d4)(p),w=(0,a.d4)(C),S=P((0,r.useState)(""),2),z=S[0],F=S[1],N=P((0,r.useState)(20),2),M=N[0],D=N[1],q=P((0,r.useState)(""),2),Q=q[0],_=q[1],L=null==c||null===(n=c.hospital)||void 0===n?void 0:n._id;(0,r.useEffect)(function(){c&&c.userId&&!c.hospital&&t((0,g.l2)(c.userId))},[t,c]),(0,r.useEffect)(function(){t((0,f.CB)())},[t]),(0,r.useEffect)(function(){L&&z?t((0,o.cT)({hospitalId:L,vaccineId:z})):(t((0,o.rI)()),D(20))},[t,L,z]),(0,r.useEffect)(function(){I||y||(z&&null!=B?B.quantity<20?D(20):D(B.quantity):D(20))},[B,z,I,y]),(0,r.useEffect)(function(){"succeeded"===x||"succeeded"===E?(alert("Vaccine stock operation completed successfully!"),_(""),t((0,o.WN)()),L&&z&&t((0,o.cT)({hospitalId:L,vaccineId:z}))):"failed"===x?(_(k||"Failed to update vaccine stock."),t((0,o.WN)())):"failed"===E&&(_(w||"Failed to create vaccine stock record."),t((0,o.WN)()))},[x,k,E,w,t,L,z]);var V=(null==B?void 0:B.quantity)||0,j=(""===M?0:parseInt(M))-V,U=j<0,T="loading"===x||"loading"===E;return I&&!B&&z&&L?r.createElement("div",{className:"update-vaccine-stock-container"},r.createElement("p",null,"Loading vaccine stock information...")):c&&L?r.createElement("div",{className:"update-vaccine-stock-container"},r.createElement("h2",null,"Vaccines Stock"),r.createElement("p",null,"Hospital: ",r.createElement("strong",null,(null===(e=c.hospital)||void 0===e?void 0:e.name)||"Loading...")),r.createElement("form",{onSubmit:function(n){if(n.preventDefault(),_(""),L)if(z){var e=parseInt(M);if(isNaN(e)||e<0)_("Proposed Stock must be a non-negative number.");else{var r=(null==B?void 0:B.quantity)||0;if(null==B){if(0===e)return void _("Cannot create a new stock record with a proposed quantity of 0.");t((0,o.y1)({hospitalId:L,vaccineId:z,initialQuantity:e}))}else{var a=e-r;if(0===a)return void _("Proposed stock is the same as current stock. No update needed.");if(r+a<0)return void _("Stock cannot be negative. Please enter a valid proposed quantity.");t((0,o.B1)({hospitalId:L,vaccineId:z,changeQty:a}))}}}else _("Please select a vaccine.");else _("User is not associated with a hospital or hospital data is missing.")},className:"update-stock-form"},r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"vaccineSelect"},"Select Vaccine:"),r.createElement("select",{id:"vaccineSelect",value:z,onChange:function(n){return F(n.target.value)},required:!0,className:"select-box"},r.createElement("option",{value:""},"-- Select a Vaccine --"),i.map(function(n){return r.createElement("option",{key:n._id,value:n._id},n.name," (",n.manufacturer,")")}))),z&&(I||y)?I?r.createElement("p",null,"Loading vaccine stock..."):r.createElement("p",{className:"error-message"},"Error loading stock: ",y):r.createElement(r.Fragment,null,r.createElement(b.A,{label:"Current Quantity",id:"currentQuantity",type:"number",value:V,readOnly:!0,disabled:!0,className:"read-only-input"}),r.createElement(b.A,{label:"Proposed Stock Quantity",id:"proposedStock",type:"number",value:M,onChange:function(n){return D(n.target.value)},placeholder:"Enter proposed stock",required:!0,min:"0"}),r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"changeQuantity"},"Change Quantity:"),r.createElement(b.A,{id:"changeQuantity",type:"text",value:j,readOnly:!0,disabled:!0,className:"read-only-input ".concat(U?"negative-change":"")}))),Q&&r.createElement("p",{className:"form-error-message"},Q),T&&r.createElement("p",null,"Processing stock update...")," ",r.createElement(h.A,{type:"submit",variant:"primary",disabled:T||!z},T?"Processing...":"Save Stock"))):r.createElement("div",{className:"update-vaccine-stock-container"},r.createElement("p",{className:"error-message"},"You are not assigned to a hospital or user data is incomplete. Please contact an administrator."))}},4417:n=>{n.exports=function(n,e){return e||(e={}),n?(n=String(n.__esModule?n.default:n),/^['"].*['"]$/.test(n)&&(n=n.slice(1,-1)),e.hash&&(n+=e.hash),/["'() \t\n]|(%20)/.test(n)||e.needQuotes?'"'.concat(n.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):n):n}},7438:n=>{n.exports="data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23000%22%20d%3D%22M287%2C197.3L159.9%2C69.8c-4.8-4.8-12.5-4.8-17.3%2C0L5.4%2C197.3c-4.8%2C4.8-4.8%2C12.5%2C0%2C17.3s12.5%2C4.8%2C17.3%2C0l130.8-130.8c4.8-4.8%2C12.5-4.8%2C17.3%2C0l130.8%2C130.8c4.8%2C4.8%2C12.5%2C4.8%2C17.3%2C0S291.8%2C202.1%2C287%2C197.3z%22%2F%3E%3C%2Fsvg%3E"},8512:(n,e,t)=>{t.d(e,{A8:()=>c,Ub:()=>i,el:()=>o});var r=t(5508),a=function(n){return n.vaccines},o=(0,r.Mz)(a,function(n){return n.registrationStatus}),c=(0,r.Mz)(a,function(n){return n.registrationError}),i=(0,r.Mz)(a,function(n){return n.vaccines});(0,r.Mz)(a,function(n){return n.fetchStatus}),(0,r.Mz)(a,function(n){return n.fetchError})},9347:(n,e,t)=>{t.d(e,{A:()=>d});var r=t(1354),a=t.n(r),o=t(6314),c=t.n(o),i=t(4417),l=t.n(i),s=new URL(t(7438),t.b),A=c()(a()),u=l()(s);A.push([n.id,`/* src/pages/Hospital/VaccinesStock.css */\n.update-vaccine-stock-container {\n    padding: 30px;\n    max-width: 600px;\n    margin: 40px auto;\n    background-color: #ffffff;\n    border-radius: 10px;\n    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);\n    text-align: center;\n}\n\n.update-vaccine-stock-container h2 {\n    color: var(--color-primary);\n    margin-bottom: 20px;\n    font-size: 2em;\n}\n\n.update-vaccine-stock-container p {\n    margin-bottom: 15px;\n    font-size: 1.1em;\n}\n\n.update-vaccine-stock-container p strong {\n    color: var(--color-secondary);\n}\n\n.update-stock-form {\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n    margin-top: 20px;\n}\n\n.form-group {\n    text-align: left;\n}\n\n.form-group label {\n    display: block;\n    margin-bottom: 8px;\n    font-weight: bold;\n    color: var(--color-text-primary);\n}\n\n.select-box {\n    width: 100%;\n    padding: 10px;\n    border: 1px solid var(--color-medium-gray);\n    border-radius: var(--border-radius-small);\n    font-size: var(--font-size-base);\n    box-sizing: border-box; /* Include padding and border in the element's total width and height */\n    background-color: var(--color-white);\n    color: var(--color-text-primary);\n    -webkit-appearance: none; /* Remove default browser styling for select */\n    -moz-appearance: none;\n    appearance: none;\n    background-image: url(${u}); /* Custom arrow */\n    background-repeat: no-repeat;\n    background-position: right 10px top 50%;\n    background-size: 12px;\n}\n\n.select-box:focus {\n    border-color: var(--color-secondary);\n    outline: none;\n    box-shadow: 0 0 0 2px rgba(var(--color-secondary-rgb), 0.2);\n}\n\n.read-only-input input {\n    background-color: var(--color-light-gray);\n    cursor: not-allowed;\n}\n\n.form-error-message {\n    color: var(--color-error);\n    margin-top: 10px;\n    font-size: 0.9em;\n}\n\n.update-stock-form button {\n    margin-top: 20px;\n    padding: 12px 25px;\n    font-size: 1.1em;\n    border-radius: 8px;\n}`,"",{version:3,sources:["webpack://./src/pages/Hospital/VaccinesStock/VaccinesStockPage.css"],names:[],mappings:"AAAA,yCAAyC;AACzC;IACI,aAAa;IACb,gBAAgB;IAChB,iBAAiB;IACjB,yBAAyB;IACzB,mBAAmB;IACnB,yCAAyC;IACzC,kBAAkB;AACtB;;AAEA;IACI,2BAA2B;IAC3B,mBAAmB;IACnB,cAAc;AAClB;;AAEA;IACI,mBAAmB;IACnB,gBAAgB;AACpB;;AAEA;IACI,6BAA6B;AACjC;;AAEA;IACI,aAAa;IACb,sBAAsB;IACtB,SAAS;IACT,gBAAgB;AACpB;;AAEA;IACI,gBAAgB;AACpB;;AAEA;IACI,cAAc;IACd,kBAAkB;IAClB,iBAAiB;IACjB,gCAAgC;AACpC;;AAEA;IACI,WAAW;IACX,aAAa;IACb,0CAA0C;IAC1C,yCAAyC;IACzC,gCAAgC;IAChC,sBAAsB,EAAE,uEAAuE;IAC/F,oCAAoC;IACpC,gCAAgC;IAChC,wBAAwB,EAAE,8CAA8C;IACxE,qBAAqB;IACrB,gBAAgB;IAChB,yDAAkd,EAAE,iBAAiB;IACre,4BAA4B;IAC5B,uCAAuC;IACvC,qBAAqB;AACzB;;AAEA;IACI,oCAAoC;IACpC,aAAa;IACb,2DAA2D;AAC/D;;AAEA;IACI,yCAAyC;IACzC,mBAAmB;AACvB;;AAEA;IACI,yBAAyB;IACzB,gBAAgB;IAChB,gBAAgB;AACpB;;AAEA;IACI,gBAAgB;IAChB,kBAAkB;IAClB,gBAAgB;IAChB,kBAAkB;AACtB",sourcesContent:["/* src/pages/Hospital/VaccinesStock.css */\n.update-vaccine-stock-container {\n    padding: 30px;\n    max-width: 600px;\n    margin: 40px auto;\n    background-color: #ffffff;\n    border-radius: 10px;\n    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);\n    text-align: center;\n}\n\n.update-vaccine-stock-container h2 {\n    color: var(--color-primary);\n    margin-bottom: 20px;\n    font-size: 2em;\n}\n\n.update-vaccine-stock-container p {\n    margin-bottom: 15px;\n    font-size: 1.1em;\n}\n\n.update-vaccine-stock-container p strong {\n    color: var(--color-secondary);\n}\n\n.update-stock-form {\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n    margin-top: 20px;\n}\n\n.form-group {\n    text-align: left;\n}\n\n.form-group label {\n    display: block;\n    margin-bottom: 8px;\n    font-weight: bold;\n    color: var(--color-text-primary);\n}\n\n.select-box {\n    width: 100%;\n    padding: 10px;\n    border: 1px solid var(--color-medium-gray);\n    border-radius: var(--border-radius-small);\n    font-size: var(--font-size-base);\n    box-sizing: border-box; /* Include padding and border in the element's total width and height */\n    background-color: var(--color-white);\n    color: var(--color-text-primary);\n    -webkit-appearance: none; /* Remove default browser styling for select */\n    -moz-appearance: none;\n    appearance: none;\n    background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23000%22%20d%3D%22M287%2C197.3L159.9%2C69.8c-4.8-4.8-12.5-4.8-17.3%2C0L5.4%2C197.3c-4.8%2C4.8-4.8%2C12.5%2C0%2C17.3s12.5%2C4.8%2C17.3%2C0l130.8-130.8c4.8-4.8%2C12.5-4.8%2C17.3%2C0l130.8%2C130.8c4.8%2C4.8%2C12.5%2C4.8%2C17.3%2C0S291.8%2C202.1%2C287%2C197.3z%22%2F%3E%3C%2Fsvg%3E'); /* Custom arrow */\n    background-repeat: no-repeat;\n    background-position: right 10px top 50%;\n    background-size: 12px;\n}\n\n.select-box:focus {\n    border-color: var(--color-secondary);\n    outline: none;\n    box-shadow: 0 0 0 2px rgba(var(--color-secondary-rgb), 0.2);\n}\n\n.read-only-input input {\n    background-color: var(--color-light-gray);\n    cursor: not-allowed;\n}\n\n.form-error-message {\n    color: var(--color-error);\n    margin-top: 10px;\n    font-size: 0.9em;\n}\n\n.update-stock-form button {\n    margin-top: 20px;\n    padding: 12px 25px;\n    font-size: 1.1em;\n    border-radius: 8px;\n}"],sourceRoot:""}]);const d=A}}]);
//# sourceMappingURL=828.bundle.js.map